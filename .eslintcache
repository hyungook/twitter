[{"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/index.js":"1","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/firebase.js":"2","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/App.js":"3","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/router.js":"4","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/routes/home.jsx":"5","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/routes/auth.jsx":"6","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/navigation.jsx":"7","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/routes/profile.jsx":"8","/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/tweet.js":"9"},{"size":269,"mtime":1612194118437,"results":"10","hashOfConfig":"11"},{"size":908,"mtime":1612445315586,"results":"12","hashOfConfig":"11"},{"size":1316,"mtime":1612459180395,"results":"13","hashOfConfig":"11"},{"size":1160,"mtime":1612458163652,"results":"14","hashOfConfig":"11"},{"size":3223,"mtime":1612451093393,"results":"15","hashOfConfig":"11"},{"size":2374,"mtime":1612280030845,"results":"16","hashOfConfig":"11"},{"size":369,"mtime":1612457207734,"results":"17","hashOfConfig":"11"},{"size":1352,"mtime":1612458235597,"results":"18","hashOfConfig":"11"},{"size":1925,"mtime":1612450772789,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22","usedDeprecatedRules":"23"},"18gi4rx",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44"},"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/index.js",["45"],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport firebase from './firebase';\n\n// console.log(firebase);\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);",["46","47"],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/firebase.js",[],["48","49"],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/App.js",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/router.js",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/routes/home.jsx",["50","51","52"],"import React, { useEffect, useState } from 'react';\nimport {v4 as uuidv4} from 'uuid';\nimport Tweet from '../components/tweet';\nimport { dbService, storageService } from '../firebase';\n\nconst Home = ({userObj}) => {\n\n    // console.log(userObj);\n\n    const [tweet, setTweet] = useState(\"\");\n    const [tweets, setTweets] = useState([]);\n    const [file, setFile] = useState([]);\n    const [attachment, setAttachment] = useState(\"\");\n\n    // const getTweets = async() => {\n    //     const dbTweets = await dbService.collection(\"tweets\").get();\n    //     dbTweets.forEach((document) => {\n    //         const tweetObject = {\n    //             ...document.data(),\n    //             id: document.id,\n    //         }\n    //         setTweets(prev => [tweetObject, ...prev])\n    //     });\n    // }\n\n    useEffect(() => {\n        // getTweets();\n        dbService.collection(\"tweets\").onSnapshot(snapshot => {\n        const tweetArray = snapshot.docs.map(doc => ({\n            id: doc.id, ...doc.data(),\n        }));\n        setTweets(tweetArray)\n        })\n    }, []);\n\n\n    const onSubmit = async (event) => {\n        event.preventDefault();\n        let attachmentUrl = \"\";\n\n        if(attachment !== \"\") {\n            const attachmentRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`);\n            const reponse = await attachmentRef.putString(attachment, \"data_url\");\n\n            attachmentUrl = await reponse.ref.getDownloadURL();\n        }\n        const TweetObjet = {\n            text:tweet,\n            createdAt: Date.now(),\n            creatorId: userObj.uid,\n            attachmentUrl\n        };\n        await dbService.collection(\"tweets\").add(TweetObjet)\n        setTweet(\"\");\n        setAttachment(\"\");\n    }\n\n    const onChange = (event) => {\n        const {target:{value}} = event;\n        setTweet(value);\n    }\n\n    console.log(tweets);\n\n    const onFileChange = (event) => {\n        // console.log(event.target.files);\n        const {target: {files},} = event;\n        const theFile = files[0];\n        const reader = new FileReader();\n        reader.onloadend = (finishedEvent) => {\n            console.log(finishedEvent);\n            const {currentTarget: {result},} = finishedEvent;\n            setAttachment(result);\n        }\n        reader.readAsDataURL(theFile);\n        // console.log(theFile);\n    };\n    const onClearAttachment = () => setAttachment(null);\n\n    return (\n        <div>\n            <form onSubmit={onSubmit}>\n                <input value={tweet} onChange={onChange} type=\"text\" placeholder=\"what's on your mind?\" maxLength={120} />\n                <input type=\"file\" accept=\"image/*\" onChange={onFileChange} />\n                <input type=\"submit\" value=\"Tweet\" />\n                {attachment && (\n                    <div>\n                        <img src={attachment} width=\"50px\" height=\"50px\" />\n                        <button onClick={onClearAttachment}>Clear</button>\n                    </div>)}\n            </form>\n            <div>\n                {tweets.map(tweet => (\n                    <Tweet key={tweet.id} tweetObj={tweet} isOwner={tweet.creatorId === userObj.uid}/>\n                ))}\n            </div>\n        </div>\n    )\n}\n\nexport default Home;",["53","54"],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/routes/auth.jsx",[],["55","56"],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/navigation.jsx",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/routes/profile.jsx",["57"],"/Users/ohhyungook/Desktop/오형욱/portfolio/work/twitter/src/components/tweet.js",["58","59"],"import React, { useEffect, useState } from 'react';\nimport { dbService, storageService } from '../firebase';\n\nconst Tweet = ({tweetObj, isOwner}) => {\n    const [editing, setEditing] = useState(false);\n    const [newTweet, setNewTweet] = useState(tweetObj.text);\n\n    const onDeleteClick = async () => {\n        const ok = window.confirm(\"Are you sure you want to delete this tweet?\");\n        // console.log(ok)\n        if(ok) {\n            //delete tweet\n            await dbService.doc(`tweets/${tweetObj.id}`).delete();\n            await storageService.refFromURL(tweetObj.attachmentUrl).delete();\n        }\n    };\n\n    const toggleEditing = () => setEditing((prev) => !prev);\n\n    const onSubmit =  async (event) => {\n        event.preventDefault();\n        console.log(tweetObj, newTweet);\n        await dbService.doc(`tweets/${tweetObj.id}`).update({\n            text:newTweet,\n        })\n        setEditing(false);\n    }\n\n    const onChange = (event) => {\n        const {target: {value},} = event;\n        setNewTweet(value);\n    }\n\n    return (\n        <div>\n      {editing ? (\n        <>\n            <form onSubmit={onSubmit}>\n                <input\n                type=\"text\"\n                placeholder=\"Edit your tweet\"\n                value={newTweet}\n                required\n                onChange={onChange}\n                />\n                <input type=\"submit\" value=\"Update Tweet\" />\n            </form>\n            <button onClick={toggleEditing}>Cancel</button>\n        </>\n      ) : (\n        <>\n          <h4>{tweetObj.text}</h4>\n          {tweetObj.attachmentUrl && <img src={tweetObj.attachmentUrl} width=\"50ox\" height=\"50px\" />}\n          {isOwner && (\n            <>\n              <button onClick={onDeleteClick}>Delete Nweet</button>\n              <button onClick={toggleEditing}>Edit Nweet</button>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Tweet;\n",{"ruleId":"60","severity":1,"message":"61","line":4,"column":8,"nodeType":"62","messageId":"63","endLine":4,"endColumn":16},{"ruleId":"64","replacedBy":"65"},{"ruleId":"66","replacedBy":"67"},{"ruleId":"64","replacedBy":"68"},{"ruleId":"66","replacedBy":"69"},{"ruleId":"60","severity":1,"message":"70","line":12,"column":12,"nodeType":"62","messageId":"63","endLine":12,"endColumn":16},{"ruleId":"60","severity":1,"message":"71","line":12,"column":18,"nodeType":"62","messageId":"63","endLine":12,"endColumn":25},{"ruleId":"72","severity":1,"message":"73","line":88,"column":25,"nodeType":"74","endLine":88,"endColumn":76},{"ruleId":"64","replacedBy":"75"},{"ruleId":"66","replacedBy":"76"},{"ruleId":"64","replacedBy":"77"},{"ruleId":"66","replacedBy":"78"},{"ruleId":"79","severity":1,"message":"80","line":28,"column":4,"nodeType":"81","endLine":28,"endColumn":6,"suggestions":"82"},{"ruleId":"60","severity":1,"message":"83","line":1,"column":17,"nodeType":"62","messageId":"63","endLine":1,"endColumn":26},{"ruleId":"72","severity":1,"message":"73","line":53,"column":38,"nodeType":"74","endLine":53,"endColumn":101},"no-unused-vars","'firebase' is defined but never used.","Identifier","unusedVar","no-native-reassign",["84"],"no-negated-in-lhs",["85"],["84"],["85"],"'file' is assigned a value but never used.","'setFile' is assigned a value but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["84"],["85"],["84"],["85"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getMyTweets'. Either include it or remove the dependency array.","ArrayExpression",["86"],"'useEffect' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"87","fix":"88"},"Update the dependencies array to be: [getMyTweets]",{"range":"89","text":"90"},[788,790],"[getMyTweets]"]